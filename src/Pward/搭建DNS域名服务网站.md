# 搭建DNS域名服务

## 初遇

前不久是暑假，特别喜欢逛逛B站，看看别人都做过哪些有意思的网站

欸，正好就看到了别人去发布PHP版本的免费二级域名分发

我自己还领了俩（其中一个就是本站挂载的域名https://xhyper.dpdns.org），回头一想，这功能实用性还挺强，毕竟一个域名，可以开通很多个前缀，我正好也配置过Cloudflare，想上手试试看

::: tip
而且市面上大多数还是PHP版本，我还是选择用Vue3+Java去部署
:::

## 搜寻实现方案

我问GPT获取到几种方案

> **🔹 方式 A：你统一管理 DNS（最常见、最方便）**
>
> - 用户在你的网站申请二级域名（如 `abc.hyper99.shop`）。
> - 你的系统调用 **Cloudflare API** 自动添加一条 DNS 记录。
> - 所有用户子域名，最终还是走你这边的 Cloudflare 管理。
>
> 👉 优点：用户完全不用配置 DNS，开箱即用。
>  👉 缺点：Cloudflare 每个域名最多 3500 条 DNS 记录，分发量太大时受限。

3500条，说实话我觉得够用了，我只是做一个小小小网站

> **🔹 方式 B：用户自己管理二级域名（子域 NS 委派）**
>
> - 你可以在主域名下添加一个 **NS 记录**，把某个子域交给用户。
>
>   - 比如：
>
>     ```
>     user1.hyper99.shop  NS  ns1.user1server.com
>     user1.hyper99.shop  NS  ns2.user1server.com
>     ```
>
> - 这样 `user1.hyper99.shop` 的解析权就转交给用户自己的 DNS 服务器，他们自己配置 A/CNAME。
>
> 👉 优点：你不用管用户后续的解析，用户自由度高。
>  👉 缺点：
>
> - 每分发一个子域，你仍然要在 Cloudflare 添加一次 NS 记录。
> - 用户还得有自己的 DNS 服务（多数小白用户没这个能力）。

我在选择时是十分认可第二种方案，毕竟大多数需要域名的用户，基本都已经掌握，或者必须去学习DNS服务，自己进行管理。不过后面在搭建网站，依旧选择了方式A，打算后续再把方式B接入

理论成立，申请Global Key后就开干



2025/9/21

------

此时，网站已经搭建完毕，融入了大大小小的功能，预计后续再加入方式B，让用户独自管理

> https://freedns.hyper99.shop

